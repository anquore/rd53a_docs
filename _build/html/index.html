
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Welcome to rd53a_emulator documentation! &#8212; rd53a_doc  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Hardware Setup (Yarr)" href="HardwareSetupYarr.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="welcome-to-rd53a-emulator-documentation">
<h1>Welcome to rd53a_emulator documentation!<a class="headerlink" href="#welcome-to-rd53a-emulator-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="guide">
<h2>Guide<a class="headerlink" href="#guide" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="HardwareSetupYarr.html">Hardware Setup (Yarr)</a></li>
<li class="toctree-l1"><a class="reference internal" href="SoftwareSetupYarr.html">Software Setup (Yarr)</a></li>
<li class="toctree-l1"><a class="reference internal" href="RCESetup.html">Hardware/Software Setup (RCE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="FELIXSetup.html">Hardware/Software Setup (FELIX)</a></li>
<li class="toctree-l1"><a class="reference internal" href="UsageExamples.html">Usage Examples</a></li>
</ul>
</div>
</div>
<div class="section" id="contributors">
<h2>Contributors<a class="headerlink" href="#contributors" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Douglas Smith (<a class="reference external" href="mailto:smithd57&#37;&#52;&#48;uw&#46;edu">smithd57<span>&#64;</span>uw<span>&#46;</span>edu</a>)</p></li>
<li><p>Dustin Werran (<a class="reference external" href="mailto:werrand&#37;&#52;&#48;uw&#46;edu">werrand<span>&#64;</span>uw<span>&#46;</span>edu</a>)</p></li>
<li><p>Lev Kurilenko</p></li>
<li><p>Logan Adams</p></li>
<li><p>Joe Mayer</p></li>
</ul>
</div>
<div class="section" id="for-rd53a-demo">
<h2>For RD53A DEMO<a class="headerlink" href="#for-rd53a-demo" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>To get to YARR code base run cd Desktop/Yarr-develv2/Yarr/src</p></li>
<li><p>Emulator bit files are saved in Desktop/Yarr-develv2/bits</p></li>
<li><p>If the emulator stops working turn off the PC/ turn it back on and then reflash the emulator using vivado 2017.4</p></li>
<li><p>To access 2017.4 run source ~/Xilinx/Vivado/2017.4/settings.sh</p></li>
<li><p>To view data run an analogscan</p></li>
<li><p>To adjust the amount of hit data produced change the value of HitOr0MaskDiff0</p></li>
<li><p>To view the value of the registers on the emulator run rd53a_readreg</p></li>
</ul>
</div>
<div class="section" id="build-info">
<h2>Build Info<a class="headerlink" href="#build-info" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Targets Xilinx KC705 Kintex FPGA Board</p></li>
<li><p>Vivado 2017.4</p></li>
</ul>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>This is a firmware RD53A emulator (code located here <a class="reference external" href="https://gitlab.cern.ch/dgsmith/rd53a_hardware_emulator">https://gitlab.cern.ch/dgsmith/rd53a_hardware_emulator</a>). The emulator has currently been set up to communicate properly with the YARR firmware (located here <a class="reference external" href="https://github.com/Yarr/Yarr-fw">https://github.com/Yarr/Yarr-fw</a>).</p></li>
<li><p>A 160 MHz output version of the emulator has also been designed to setup communication between the RD53A emulator and the RCE-RD53A projetc at SLAC (the code for this can also be found at the link above). For more information about RCE go to this link <a class="reference external" href="https://twiki.cern.ch/twiki/bin/view/Atlas/RCEDevelopmentLab">https://twiki.cern.ch/twiki/bin/view/Atlas/RCEDevelopmentLab</a>.</p></li>
<li><p>Information on the installation of YARR and using YARR can be found here <a class="reference external" href="https://yarr.readthedocs.io/en/latest/">https://yarr.readthedocs.io/en/latest/</a>.</p></li>
<li><p>A block diagram of the system can be seen below.</p></li>
</ul>
<img alt="_images/emulator_block_diagram.png" src="_images/emulator_block_diagram.png" />
</div>
<div class="section" id="current-features-non-features">
<h2>Current Features/Non-features<a class="headerlink" href="#current-features-non-features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The main pieces of currently working functionality are listed below.</p></li>
<li><p>Input data to the system is properly decoded using the custom rd53A protocol.</p></li>
<li><p>Output data of the system is properly encoded using the aurora 64/66B protocal at 640 MHz.</p></li>
<li><p>Reading and writing of global registers. The read out registers are sent through lane 0.</p></li>
<li><p>Trigger commands output clumps of trigger data. The trigger data is based in real data collected at CERN. The shapes of the data consist mostly of small Tetris like pieces and lines. See usage examples for more information.</p></li>
<li><p>ECR, BCR, and CAL commands are received by the system though currently have no external impact.</p></li>
<li><p>The main non-features are listed below.</p></li>
<li><p>Since this is a digital design project any RD53A features that involve analog circuitry such as the pixels have been greatly simplified or removed entirely.</p></li>
<li><p>An example of a simplification is that the pixel data outputted by triggers is the result of random number generators and/or standarized data formats and is not produced by an emulation of individual pixels. Examples of analog features that have been removed include pixel calibration injection as well as the mechanics that allow the user to read/write to pixel registers and modify pixel configuration.</p></li>
<li><p>As stated above ECR, BCR, and CAL commands are received by the system though currently have no external impact.</p></li>
<li><p>The 160 MHz input clock is not derived from the input stream using clock data recovery and needs to be provided to the system as a seperate signal.</p></li>
</ul>
</div>
<div class="section" id="planned-features-updates">
<h2>Planned Features/Updates<a class="headerlink" href="#planned-features-updates" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The currently planned updates and upgrades to the system are listed below</p></li>
<li><p>Developing compatiblity with the FELIX project.</p></li>
<li><p>Bug fixes and adding user requested features to the RD53A</p></li>
<li><p>Begin working on the RD53B version of the emulator</p></li>
</ul>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">rd53a_doc</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="HardwareSetupYarr.html">Hardware Setup (Yarr)</a></li>
<li class="toctree-l1"><a class="reference internal" href="SoftwareSetupYarr.html">Software Setup (Yarr)</a></li>
<li class="toctree-l1"><a class="reference internal" href="RCESetup.html">Hardware/Software Setup (RCE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="FELIXSetup.html">Hardware/Software Setup (FELIX)</a></li>
<li class="toctree-l1"><a class="reference internal" href="UsageExamples.html">Usage Examples</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
      <li>Next: <a href="HardwareSetupYarr.html" title="next chapter">Hardware Setup (Yarr)</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Douglas Smith.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>